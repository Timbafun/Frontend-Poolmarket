<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PoolMarket</title>
<style>
body { font-family: "Poppins", sans-serif; margin:0; padding:0; background:#f5f5f5; }
header { background-color:#007bff; color:#fff; display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; }
header h1 { margin:0; font-size:1.5rem; cursor:pointer; }
header nav button { background:none; border:none; color:#fff; font-size:1rem; cursor:pointer; margin-left:1rem; }
header nav button:hover { text-decoration:underline; }
.container { width:90%; max-width:900px; margin:2rem auto; text-align:center; }
h2 { margin-top:0; }
input { width:100%; padding:0.8rem; margin:0.5rem 0; border:1px solid #ccc; border-radius:8px; font-size:1rem; }
button.submit-btn { width:100%; padding:0.9rem; margin-top:1rem; background-color:#007bff; color:white; border:none; border-radius:8px; cursor:pointer; font-size:1rem; }
button.submit-btn:hover { background-color:#0056b3; }
.candidate-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:2rem; margin-top:2rem; justify-items:center; }
.candidate-card { background:#fff; border-radius:1rem; overflow:hidden; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,0.1); transition:0.3s; width:200px; position:relative; }
.candidate-card:hover { transform:scale(1.05); box-shadow:0 6px 12px rgba(0,0,0,0.15); }
.candidate-card img { width:100%; height:220px; object-fit:cover; }
.candidate-card p { margin:0; padding:0.5rem; font-weight:bold; }
.vote-bar { position:absolute; top:0; left:0; height:5px; background:#28a745; width:0%; transition:0.5s; }
.hidden { display:none; }
.success { color:green; font-weight:bold; margin-top:1rem; }
.logout-btn { background:#dc3545; color:#fff; border:none; padding:0.7rem 1rem; border-radius:8px; cursor:pointer; margin-top:1rem; }
.logout-btn:hover { background:#a71d2a; }
</style>
</head>
<body>

<header>
<h1 onclick="showHome()">PoolMarket</h1>
<nav>
<button id="loginBtn" onclick="showLogin()">Login</button>
<button id="registerBtn" onclick="showRegister()">Cadastre-se</button>
</nav>
</header>

<div class="container" id="main-container">

<!-- Página inicial -->
<div id="home">
<h2>Faça seu voto</h2>
<div class="candidate-grid">
<div class="candidate-card" onclick="selectCandidate('Jair Messias Bolsonaro')">
<div class="vote-bar" id="bar-Bolsonaro"></div>
<img src="https://upload.wikimedia.org/wikipedia/commons/0/0e/Jair_Bolsonaro_2022.jpg" alt="Bolsonaro">
<p>Jair Messias Bolsonaro</p>
</div>
<div class="candidate-card" onclick="selectCandidate('Luiz Inácio Lula da Silva')">
<div class="vote-bar" id="bar-Lula"></div>
<img src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Luiz_In%C3%A1cio_Lula_da_Silva_%282023%29.jpg" alt="Lula">
<p>Luiz Inácio Lula da Silva</p>
</div>
</div>
</div>

<!-- Cadastro -->
<div id="register" class="hidden">
<h2>Cadastro</h2>
<input id="name" type="text" placeholder="Nome completo" required>
<input id="email" type="email" placeholder="E-mail" required>
<input id="phone" type="text" placeholder="Telefone" required>
<input id="cpf" type="text" placeholder="CPF" required>
<input id="password" type="password" placeholder="Senha" required>
<input id="confirmPassword" type="password" placeholder="Confirme a senha" required>
<button class="submit-btn" onclick="registerUser()">Cadastrar e votar</button>
</div>

<!-- Login -->
<div id="login" class="hidden">
<h2>Login</h2>
<input id="loginEmail" type="email" placeholder="E-mail" required>
<input id="loginPassword" type="password" placeholder="Senha" required>
<button class="submit-btn" onclick="loginUser()">Entrar</button>
</div>

<!-- Painel do eleitor -->
<div id="dashboard" class="hidden">
<h2>Área do Eleitor</h2>
<p id="userInfo"></p>
<div id="votedCandidate"></div>
<button class="logout-btn" onclick="logout()">Sair</button>
</div>

</div>

<script>
let currentUser = null;
let selectedCandidate = null;

function hideAll(){['home','register','login','dashboard'].forEach(id=>{document.getElementById(id).classList.add('hidden');});}

function showHome(){hideAll();document.getElementById('home').classList.remove('hidden');updateVoteBars();}
function showRegister(){hideAll();document.getElementById('register').classList.remove('hidden');}
function showLogin(){hideAll();document.getElementById('login').classList.remove('hidden');}

function updateVoteBars(){
const votes = JSON.parse(localStorage.getItem('votes')) || {'Jair Messias Bolsonaro':0,'Luiz Inácio Lula da Silva':0};
document.getElementById('bar-Bolsonaro').style.width=(votes['Jair Messias Bolsonaro']*10)+'%';
document.getElementById('bar-Lula').style.width=(votes['Luiz Inácio Lula da Silva']*10)+'%';
}

function selectCandidate(candidate){
selectedCandidate=candidate;
if(!currentUser){alert('Para votar, você precisa se cadastrar primeiro.');showRegister();}else{voteCandidate(candidate);}
}

function registerUser(){
const name=document.getElementById('name').value.trim();
const email=document.getElementById('email').value.trim();
const phone=document.getElementById('phone').value.trim();
const cpf=document.getElementById('cpf').value.trim();
const password=document.getElementById('password').value;
const confirmPassword=document.getElementById('confirmPassword').value;

if(!name||!email||!phone||!cpf||!password||!confirmPassword){alert('Preencha todos os campos.');return;}
if(password!==confirmPassword){alert('As senhas não coincidem.');return;}

const user={name,email,phone,cpf,password,vote:null};
localStorage.setItem(email,JSON.stringify(user));
currentUser=user;
document.getElementById('registerBtn').style.display='none';
alert('Cadastro realizado com sucesso!');
showHome();
}

function loginUser(){
const email=document.getElementById('loginEmail').value.trim();
const password=document.getElementById('loginPassword').value;
const data=localStorage.getItem(email);
if(!data){alert('Usuário não encontrado!');return;}
const user=JSON.parse(data);
if(user.password!==password){alert('Senha incorreta!');return;}
currentUser=user;
document.getElementById('registerBtn').style.display='none';
showDashboard();
}

function voteCandidate(candidate){
if(!currentUser){alert('Você precisa estar cadastrado para votar.');showRegister();return;}
currentUser.vote=candidate;
localStorage.setItem(currentUser.email,JSON.stringify(currentUser));
// Atualiza contagem de votos
const votes=JSON.parse(localStorage.getItem('votes'))||{'Jair Messias Bolsonaro':0,'Luiz Inácio Lula da Silva':0};
votes[candidate]=votes[candidate]+1;
localStorage.setItem('votes',JSON.stringify(votes));
alert(`✅ Seu voto em ${candidate} foi registrado com sucesso!`);
showDashboard();
}

function showDashboard(){
hideAll();
document.getElementById('dashboard').classList.remove('hidden');
document.getElementById('userInfo').innerHTML=`<strong>Bem-vindo(a), ${currentUser.name}</strong><br>Seu CPF: ${currentUser.cpf}`;
const imgSrc=currentUser.vote&&currentUser.vote.includes("Bolsonaro")
?'https://upload.wikimedia.org/wikipedia/commons/0/0e/Jair_Bolsonaro_2022.jpg'
:'https://upload.wikimedia.org/wikipedia/commons/4/4e/Luiz_In%C3%A1cio_Lula_da_Silva_%282023%29.jpg';
document.getElementById('votedCandidate').innerHTML=currentUser.vote?`<p>✅ Seu voto foi confirmado em:</p><img src="${imgSrc}" alt="${currentUser.vote}" style="width:200px;border-radius:10px;margin-top:10px;"><p><strong>${currentUser.vote}</strong></p>`:'<p>Você ainda não votou.</p>';
updateVoteBars();
}

function logout(){currentUser=null;showHome();document.getElementById('loginBtn').style.display='inline-block';}

showHome();
</script>
</body>
</html>
